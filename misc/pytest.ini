# ---
# relations:
#   role: test_config
#   domain: testing
#   upstream: []
#   downstream:
#     - Makefile
#     - tests/
# ---
[pytest]
markers =
    unit: schnelle, isolierte Unit-Tests (CI + lokal)
    integration: Tests mit Mock-Services (CI + lokal)
    e2e: End-to-End Tests mit echten Containern (NUR lokal)
    local_only: Explizit nur lokal ausführen (nicht in CI)
    slow: Tests mit >10s Laufzeit
    chaos: Chaos/Resilience Tests - DESTRUKTIV! (NUR lokal)
    feature: Feature workflow tests for deployment validation
    mandatory: Tests that must pass for feature deployment

testpaths = tests
python_files = test_*.py
norecursedirs = local e2e .git .venv __pycache__ node_modules
addopts = -v --strict-markers --tb=short --cov=core --cov=services --cov-report=term-missing --cov-fail-under=80

# Mandatory feature testing requirements
# All features must have: unit tests, integration tests, and feature validation
# Coverage requirement: 80% minimum for core/ and services/
# Standardmäßig keine E2E/Local-Only Tests in CI
# Explizit mit: pytest -m "e2e" oder pytest -m "local_only"
